# Backend log analysis tool

# Howto build

```bash
$ bundle install --path vendor/bundle
```

## Howto run

```bash
$ bundle exec main.rb ~/logfiles/ 2>~/tmp/unparsed_loglines.log
=============== Generic Stats ===================
Total lines:				 100000
Failed parsing:				 0.03% (33)
Filtered by HEAD method:		 0.73% (735)

=============== HTTP status code Stats ==========
200 (success):				 69.40%
202 (success):				 20.22%
400:					 0.00%
404:					 5.77%
409 (unauthorized):			 4.18%
others:					 0.43%

=============== Authentication mode Stats =======
provider_key:				 88.62%
service_token:				 10.40%

=============== Service Id Stats ================
Default Service Id:			 35.89%
Service Id as param:			 63.13%

=============== Application Stats ===============
By app_id:				 33.91%
By user_key:				 32.43%

=============== Http Status Code Reported Stats =
Total:					 25.96%
Out of authrep:				 46.34%

=============== Endpoint Stats ==================
/transactions/authorize.xml:		 12.20%
/transactions/oauth_authorize.xml:	 3.72%
/transactions/authrep.xml:		 56.02%
/transactions/oauth_authrep.xml:	 7.04%
/transactions.xml:			 20.31%
others:					 0.71%

=============== Providers Distribution indicators =============================
50.0% of traffic generated by 4.12% of providers (8 in total)
70.0% of traffic generated by 9.28% of providers (18 in total)
80.0% of traffic generated by 13.92% of providers (27 in total)
90.0% of traffic generated by 21.65% of providers (42 in total)
99.0% of traffic generated by 47.94% of providers (93 in total)

==== Number of different service_id's used by provider Stats ==================
Percentile 50.0: 1.00
Percentile 70.0: 1.00
Percentile 80.0: 2.00
Percentile 90.0: 2.70
Percentile 99.0: 6.00

==== Number of metrics per request Stats (only authrep) ==================
0 metrics: 14.53 %
1 metrics: 76.52 %
2 metrics: 6.03 %
3 metrics: 2.90 %
4 metrics: 0.01 %
```

# TODO
 - Rack::Util.parse as parser
