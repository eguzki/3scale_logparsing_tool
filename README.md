# Backend log analysis tool

# Howto build

```bash
$ bundle install --path vendor/bundle
```

## Howto run

```bash
$ bundle exec main.rb ~/logfiles/ 2>~/tmp/unparsed_loglines.log
=============== Generic Stats ===================
Total lines:				 16177270
Failed parsing:				 0.01% (825)
Filtered by HEAD method:		 0.72% (115890)

=============== HTTP status code Stats ==========
200 (success):				 67.65%
202 (success):				 18.01%
400:					 0.00%
404:					 8.94%
409 (unauthorized):			 5.00%
others:					 0.40%

=============== Authentication mode Stats =======
provider_key:				 87.78%
service_token:				 11.31%

=============== Service Id Stats ================
Default Service Id:			 32.96%
Service Id as param:			 66.14%

=============== Application Stats ===============
By app_id:				 31.41%
By user_key:				 33.90%

=============== Http Status Code Reported Stats =
Total:					 23.72%
Out of authrep:				 38.62%

=============== Endpoint Stats ==================
/transactions/authorize.xml:		 9.93%
/transactions/oauth_authorize.xml:	 2.65%
/transactions/authrep.xml:		 61.41%
/transactions/oauth_authrep.xml:	 7.13%
/transactions.xml:			 18.10%
others:					 0.78%

=============== Providers Distribution indicators =============================
50.0% of traffic generated by 2.61% of providers (8 in total)
70.0% of traffic generated by 5.86% of providers (18 in total)
80.0% of traffic generated by 8.79% of providers (27 in total)
90.0% of traffic generated by 14.33% of providers (44 in total)
99.0% of traffic generated by 33.22% of providers (102 in total)

==== Number of unique different entities ==================
services:	 554
applications:	 10698

==== Number of different service_id's used by provider Stats ==================
Percentile 50.0: 1.00
Percentile 70.0: 1.00
Percentile 80.0: 2.00
Percentile 90.0: 3.00
Percentile 99.0: 14.88

==== Number of different app_id's used by provider Stats ==================
Percentile 50.0: 5.00
Percentile 70.0: 15.00
Percentile 80.0: 29.80
Percentile 90.0: 70.80
Percentile 99.0: 663.58

==== Number of metrics per request Stats (only authrep) ==================
0 metrics: 20.85 %
1 metrics: 69.07 %
2 metrics: 7.46 %
3 metrics: 2.59 %
4 metrics: 0.01 %
```

# TODO
 - Rack::Util.parse as parser
